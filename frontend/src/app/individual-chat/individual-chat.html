<div class="chat-container">
  <!-- Left Sidebar (Users/Search) -->
  <div class="sidebar">
    <input type="text" [(ngModel)]="searchUserTerm" placeholder="Search users..." class="search-input">
    <ul class="user-list">
      <li *ngFor="let user of filteredUsers()" (click)="selectUser(user)" class="user-item">
        {{ user.name }} ({{ user.role }})
      </li>
    </ul>
  </div>

  <!-- Right Chat Area -->
  <div class="chat-area" *ngIf="selectedUser">
    <div class="chat-header">
      Chatting with {{ selectedUser.name }}
    </div>
    <div class="messages-feed">
      <div *ngFor="let msg of messages" class="message" [class.sent]="msg.sender._id === userId">
        <strong>{{ msg.sender.name }}</strong> - {{ msg.sentDate | date:'short' }}
        <p>{{ msg.text }}</p>
      </div>
    </div>
    <div class="message-input">
      <input type="text" [(ngModel)]="newMessageText" placeholder="Type a message..." (keyup.enter)="sendMessage()">
      <button (click)="sendMessage()">Send</button>
    </div>
  </div>
  <div *ngIf="!selectedUser" class="no-chat">
    Select a user to start chatting
  </div>
</div>