<h2>Information Sharing</h2>

<!-- Create Post -->
<div class="new-post">
  <textarea [(ngModel)]="newPostText" placeholder="Write a description..."></textarea>
  <input type="file" (change)="onImageSelected($event)" />
  <button (click)="createPost()">Share</button>
</div>

<hr />

<!-- Posts Feed -->
<div *ngFor="let post of posts" class="post-card">
  <div class="post-header">
    <b>{{ post.postedBy.name }}</b> <small>({{ post.postedBy.role }})</small>
  </div>

  <div class="post-content">
    <p>{{ post.text }}</p>
    <img *ngIf="post.imageUrl" [src]="post.imageUrl" alt="Post Image" class="post-img" />
  </div>

  <div class="post-footer">
    <button (click)="toggleLike(post._id)">â¤ï¸ {{ post.likes.length }}</button>
    <small>{{ post.postedDate | date:'short' }}</small>

    <!-- âœ… Delete Button (only visible for owner) -->
    <button *ngIf="isOwner(post)" (click)="deletePost(post._id)" class="delete-btn">ğŸ—‘ Delete</button>
  </div>

  <!-- Comments Section -->
  <div class="comments">
    <div *ngFor="let comment of post.comments" class="comment">
      <b>{{ comment.commentedBy.name }}</b>: {{ comment.text }}
    </div>
  </div>

  <!-- Add Comment -->
  <div *ngIf="selectedPostId === post._id">
    <input [(ngModel)]="commentText" placeholder="Add a comment..." />
    <button (click)="addComment(post._id)">Post</button>
  </div>
  <button (click)="selectPostForComment(post._id)">ğŸ’¬ Comment</button>
</div>
